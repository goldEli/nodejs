(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16b68fae"],{bf28:function(e,t,a){},c2fc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isupdate?a("div",{staticClass:"content"},[a("AdminModal",{attrs:{type:"add",visible:e.showModal},on:{closeDialog:e.mycloseDialog}}),a("AdminModal",{attrs:{type:"update",visible:e.showModal,inputVal:e.changeUpdate},on:{closeDialog:e.mycloseDialog,updatemyData:e.updateData}}),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入学生姓名"},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:1==e.userInfo.type},on:{click:e.onSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",disabled:1==e.userInfo.type},on:{click:e.reset}},[e._v("重置")])],1),a("el-form-item",[a("el-button",{staticClass:"addUser",attrs:{type:"primary",disabled:1==e.userInfo.type},on:{click:e.addUser}},[e._v("添加管理员")])],1)],1),a("el-table",{staticStyle:{width:"100%",margin:"3rem auto"},attrs:{data:e.myCurrentData,border:""}},[a("el-table-column",{attrs:{align:"center",fixed:"",prop:"id",label:"编号"}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"账号"}}),a("el-table-column",{attrs:{align:"center",prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(1==t.row.type?"普通管理员":"超级管理员"))])]}}],null,!1,2981209664)}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.delQueding(t.row)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.updateForm(t.row)}}},[e._v("修改")])]}}],null,!1,1159480200)})],1),a("el-pagination",{attrs:{center:"",layout:"prev, pager, next","current-page":e.currentPage,"page-count":e.myPageCount},on:{"current-change":e.myhandleCurrentChange}})],1):e._e()},l=[],r=(a("4de4"),a("fb6a"),a("4702")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{center:"",title:!0===e.isUpdate?"修改管理员信息":"添加管理员",visible:e.visible,width:"30%"},on:{"update:visible":function(t){e.visible=t},close:e.delDialog}},[a("el-form",{ref:"formValue",attrs:{model:e.formValue,"label-width":"80px",size:"small",rules:e.rules}},[e.isUpdate?a("el-form-item",{attrs:{label:"编号",prop:"id"}},[a("el-input",{attrs:{disabled:e.isUpdate,placeholder:"仅支持数值类型"},model:{value:e.formValue.id,callback:function(t){e.$set(e.formValue,"id",e._n(t))},expression:"formValue.id"}})],1):e._e(),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.formValue.name,callback:function(t){e.$set(e.formValue,"name",t)},expression:"formValue.name"}})],1),a("el-form-item",{attrs:{label:"账号",prop:"userId"}},[a("el-input",{attrs:{disabled:e.isUpdate,placeholder:"账号仅支持数值类型"},model:{value:e.formValue.userId,callback:function(t){e.$set(e.formValue,"userId",e._n(t))},expression:"formValue.userId"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.formValue.password,callback:function(t){e.$set(e.formValue,"password",t)},expression:"formValue.password"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{disabled:1==e.userInfo.type,placeholder:"请选择管理员类型"},model:{value:e.formValue.type,callback:function(t){e.$set(e.formValue,"type",t)},expression:"formValue.type"}},[a("el-option",{attrs:{label:"普通管理员",value:"1"}}),a("el-option",{attrs:{label:"超级管理员",value:"2"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.delDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm("formValue")}}},[e._v("确 定")])],1)],1)},o=[],s=(a("b0c0"),a("e801")),u={name:"",mixins:[r["a"]],props:["type","visible","inputVal"],data:function(){return{formValue:{id:"",name:"",userId:"",password:"",type:""},isUpdate:!1,rules:{name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],userId:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}]}}},created:function(){this.userInfo=Object(s["a"])("userInfo")},watch:{inputVal:function(){this.formValue.id=this.inputVal.id,this.formValue.name=this.inputVal.name,this.formValue.userId=this.inputVal.userId,this.formValue.password=this.inputVal.password,1==this.inputVal.type?this.formValue.type="普通管理员":this.formValue.type="超级管理员",this.isUpdate=!0}},methods:{confirm:function(e){var t=this,a=this;"普通管理员"===this.formValue.type&&(this.formValue.type=1),"超级管理员"===this.formValue.type&&(this.formValue.type=2),a.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;a.isUpdate?a.update({url:"/admin/updateadmin",data:{id:a.formValue.id,name:a.formValue.name,password:a.formValue.password,type:t.formValue.type},updateUrl:"/admin/getadmin",callback:function(e){a.$emit("updatemyData",e),a.delDialog()}}):a.add({url:"/admin/addadmin",data:{name:a.formValue.name,userId:a.formValue.userId,password:a.formValue.password,type:a.formValue.type},updateUrl:"/admin/getadmin",callback:function(e){a.$emit("updatemyData",e),a.delDialog()}})}))},updateQueding:function(e){this.updateState=!1,this.update({url:"/suShe/gengXinById",data:this.formUpdate,method:"post"})},delDialog:function(){this.isUpdate=!1,this.formValue.id="",this.formValue.name="",this.formValue.userId="",this.formValue.password="",this.formValue.type="",this.$emit("closeDialog")}}},d=u,c=a("2877"),m=Object(c["a"])(d,i,o,!1,null,null,null),p=m.exports,f={name:"",components:{AdminModal:p},mixins:[r["a"]],data:function(){return{userInfo:"",selectUrl:"/suShe/chaXunAll",myTableData:[],currentPage:1,pageNum:5,showModal:!1,changeUpdate:"",isupdate:!0,searchVal:""}},computed:{myCurrentData:function(){var e=(this.currentPage-1)*this.pageNum,t=e+this.pageNum;return this.myTableData.slice(e,t)},myPageCount:function(){return Math.ceil(this.myTableData.length/this.pageNum)}},created:function(){var e=this;e.userInfo=Object(s["a"])("userInfo"),console.log("userInfo",Object(s["a"])("userInfo")),e.onSelect({url:"/admin/getadmin"},(function(t){1==e.userInfo.type?(console.log("判断",e.userInfo.id),e.myTableData=t.filter((function(t){return t.id==e.userInfo.id}))):e.myTableData=t}))},mounted:function(){},methods:{myhandleCurrentChange:function(e){this.currentPage=e},addQueding:function(){this.add({url:"/suShe/xinZeng",data:this.formAdd})},delQueding:function(e){var t=this;if(this.userInfo.id===e.id)return this.$message({type:"info",message:"你不能删除自己"});t.$confirm("确认删除该管理员吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log("row.id",e.id),t.del({url:"/admin/deladmin",data:{id:e.id},updateUrl:"/admin/getadmin",callback:function(e){t.updateData(e)}})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},updateForm:function(e){console.log("item",e),this.changeUpdate=e,this.showModal=!0},mycloseDialog:function(){this.showModal=!1,this.changeUpdate=""},updateData:function(e){var t=this;1==this.userInfo.type?(console.log("判断",this.userInfo.id),this.myTableData=e.filter((function(e){return e.id==t.userInfo.id}))):this.myTableData=e,this.currentPage=1},onSearch:function(){var e=this;console.log(this.searchVal),""===this.searchVal?this.onSelect({url:"/admin/getadmin"},(function(t){e.myTableData=t})):this.onSelect({url:"/admin/getsingleadmin",params:{name:this.searchVal}},(function(t){e.myTableData=t})),this.currentPage=1},reset:function(){var e=this;this.searchVal="",this.onSelect({url:"/admin/getadmin"},(function(t){1==e.userInfo.type?e.myTableData=t.filter((function(t){return t.id==e.userInfo.id})):e.myTableData=t})),this.currentPage=1},dept:function(e){var t=this,a="";a=1==e.type?2:1,t.$confirm("确认催款该宿舍吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.del({url:"/dorm/deptdorm",data:{id:e.id,type:a},updateUrl:"/dorm/getdorm",callback:function(e){t.updateData(e)}})})).catch((function(){t.$message({type:"info",message:"已取消催款"})}))},addUser:function(){if(1==this.userInfo.type)return this.$message({type:"info",message:"你没有增加管理员的权限"});this.showModal=!0}}},h=f,g=(a("cb54"),Object(c["a"])(h,n,l,!1,null,"68787f4e",null));t["default"]=g.exports},cb54:function(e,t,a){"use strict";var n=a("bf28"),l=a.n(n);l.a}}]);
//# sourceMappingURL=chunk-16b68fae.54c3b0a7.js.map